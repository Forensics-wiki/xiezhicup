"use strict";var isMobile,vuelogin=Vue.extend({template:'\n    <div class="masker">\n        <div class="masker_box">\n            <div class="masker_header">\n                <div class="masker_title"></div>\n                <div class="masker_close el-icon-close" @click="remove()"></div>\n            </div>\n            <div class="masker_content">\n                <div class="tab">\n                    <a class="active" href="javascript:;" @click="remove();createLogin(vuelogin)">登录</a>\n                    <a href="javascript:;" @click="remove();createLogin(vueregister)">注册</a>\n                </div>\n                <el-form ref="login" :rules="loginRules" :model="loginForm" class="loginBox">\n                    <el-form-item prop="account">\n                        <el-input v-model="loginForm.account" autocomplete="off"  placeholder="请输入账号"></el-input>\n                    </el-form-item>\n                    <el-form-item prop="password">\n                        <el-input v-model="loginForm.password" placeholder="请输入密码" autocomplete="off" show-password auto-complete="new-password" maxlength=\'20\'></el-input>\n                    </el-form-item>\n                    <el-form-item prop="bm_code" v-if="show_code">\n                        <el-input class="cbinput" v-model="loginForm.bm_code" placeholder="请输入验证码" style="width: 70%" maxlength=\'4\'></el-input>\n                        <img :src="base_url+\'verify_image?v=\'+verify_image" style="float: right" @click="verify_image = new Date().getTime()" alt="">\n                    </el-form-item>\n                    <el-form-item>\n                        <p class="forget"><span @click="remove();createLogin(vueforget)">忘记密码？</span></p>\n                        <el-button type="primary"  @click="submit" style="width: 100%">登录</el-button>\n                    </el-form-item>\n                    <div class="disclaimer">\n                        阅读并接受\n                        <a target="_blank" href="https://www.ichunqiu.com/default/disclaimer?name=banquancon" class="disclaimer_link" style="margin-left: -6px">《版权与免责声明》</a>、\n                        <a target="_blank" href="https://www.ichunqiu.com/default/disclaimer?name=userprivacy" class="disclaimer_link" style="margin-left: -6px">《用户隐私协议》</a>和\n                        <a target="_blank" href="https://www.ichunqiu.com/default/disclaimer?name=usercon" class="disclaimer_link"  style="margin-left: -6px">《用户付费协议》</a>\n                    </div>\n                </el-form>\n            </div>\n        </div>\n    </div>\n    ',data:function(){return{bm_code:"",verify_image:(new Date).getTime(),show_code:!1,loginForm:{account:"",password:"",bm_code:""},loginRules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"用户名密码6~20个字符之间",trigger:"blur"},{pattern:/^[\\~!@#$%^&*()-_=+|{}\[\],.?\/:;\'\"\d\w]{6,20}$/,message:"密码格式错误",trigger:"blur"}],bm_code:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^[\da-zA-Z_]{4,4}$/,message:"请输入4位验证码",trigger:"blur"}]}}},created:function(){},methods:{submit:function(){var i=this;this.$refs.login.validate(function(e){e&&$.fn_ajax({url:base_url+"api/member/user_login",options:{account:fn_login_encryption(i.loginForm.account),password:fn_login_encryption(i.loginForm.password),bm_code:i.loginForm.bm_code,k:url_key},callBack:function(e){0==e.code?(i.$message.success(e.message),setTimeout("location.reload()",500)):(111==e.code&&(i.show_code=!0),i.$message.error(e.message),i.verify_image=(new Date).getTime())}})})}}}),vueregister=Vue.extend({template:'\n    <div class="masker">\n        <div class="masker_box">\n            <div class="masker_header">\n                <div class="masker_title"></div>\n                <div class="masker_close el-icon-close" @click="remove()"></div>\n            </div>\n            <div class="masker_content">\n                <div class="tab">\n                    <a href="javascript:;" @click="remove();createLogin(vuelogin)">登录</a>\n                    <a class="active" href="javascript:;" @click="remove();createLogin(vueregister)">注册</a>\n                </div>\n                <el-form ref="register" :rules="registerRules" :model="registerForm">\n                    <el-form-item prop="phone">\n                        <el-input v-model="registerForm.phone" placeholder="请输入手机号" maxlength=\'11\'></el-input>\n                    </el-form-item>\n                    <el-form-item prop="bm_code">\n                        <el-input class="cbinput" v-model="registerForm.bm_code" placeholder="请输入验证码" style="width: 60%" maxlength=\'4\'></el-input>\n                        <img class="sms_verify" :src="base_url+\'verify_image?v=\'+verify_image" @click="verify_image = new Date().getTime()" alt="">\n                    </el-form-item>\n                    <el-form-item prop="sms_code">\n                        <el-input v-model="registerForm.sms_code" placeholder="短信验证码" style="width: 60%"></el-input>\n                        <span class="reapcode" :class="{dis_click:disabled}" @click="getCode">{{count_text}}</span>\n                    </el-form-item>\n                    <el-form-item prop="password">\n                        <el-input v-model="registerForm.password" placeholder="密码，限6-20个字符之间" autocomplete="off" show-password auto-complete="new-password" maxlength=\'20\'></el-input>\n                    </el-form-item>\n                    <el-form-item prop="confirm">\n                        <el-input v-model="registerForm.confirm" placeholder="确认密码" autocomplete="off" show-password auto-complete="new-password" maxlength=\'20\'></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <p class="gologin">已有账号，去<a href="javascript:;" @click="remove();createLogin(vuelogin)">登录</a></p>\n                        <el-button type="primary" @click="submit" style="width: 100%">注册</el-button>\n                    </el-form-item>\n                    <div class="disclaimer">\n                        <input v-model="statement" type="checkbox">我已审慎阅读、充分理解并同意以下协议\n                        <a target="_blank" href="https://www.ichunqiu.com/default/disclaimer?name=banquancon" class="disclaimer_link" style="margin-left: -6px">《版权与免责声明》</a>\n                        <a target="_blank" href="https://www.ichunqiu.com/default/disclaimer?name=userprivacy" class="disclaimer_link" style="margin-left: 14px">《用户隐私协议》</a>\n                        <a target="_blank" href="https://www.ichunqiu.com/default/disclaimer?name=usercon" class="disclaimer_link"  style="margin-left: -6px">《用户付费协议》</a>\n                    </div>\n                </el-form>\n            </div>\n        </div>\n    </div>\n    ',data:function(){var t=this;return{statement:!1,bm_code:"",verify_image:(new Date).getTime(),registerForm:{phone:"",sms_code:"",password:"",confirm:"",bm_code:""},registerRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式错误",trigger:"blur"}],bm_code:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^[\da-zA-Z_]{4,4}$/,message:"请输入4位验证码",trigger:"blur"}],sms_code:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"用户名密码6~20个字符之间",trigger:"blur"},{pattern:/^[\\~!@#$%^&*()-_=+|{}\[\],.?\/:;\'\"\d\w]{6,20}$/,message:"密码格式错误",trigger:"blur"}],confirm:[{validator:function(e,i,r){""==i?r(new Error("请输入确认密码")):t.registerForm.password!=t.registerForm.confirm?r(new Error("两次密码输入不一致")):r()},trigger:"blur"}]},count_text:"获取验证码",disabled:!1,anewsetInt:null}},methods:{submit:function(){var i=this;this.$refs.register.validate(function(e){if(e){if(!i.statement)return void i.$message.error("请阅读并勾选版权和免责声明");$.fn_ajax({url:base_url+"api/member/user_register",options:{phone:fn_login_encryption(i.registerForm.phone),sms_code:fn_login_encryption(i.registerForm.sms_code),password:fn_login_encryption(i.registerForm.password),confirm:fn_login_encryption(i.registerForm.confirm),k:url_key},callBack:function(e){0==e.code?(i.$message.success(e.message),setTimeout(function(){i.remove(),createLogin(vuelogin)},1e3)):(i.$message.error(e.message),i.verify_image=(new Date).getTime())}})}})},getCode:function(){var r=this;this.disabled||(this.registerForm.phone?this.registerForm.bm_code?$.fn_ajax({url:base_url+"api/message/send_code",options:{phone:fn_login_encryption(this.registerForm.phone),bm_code:this.registerForm.bm_code,type:1},callBack:function(e){var i;0==e.code?(r.$message.success(e.message),r.disabled=!0,i=120,r.anewsetInt=setInterval(function(){if(i--,r.count_text=i+"s重新获取",0==i)return r.count_text="获取验证码",i=0,r.disabled=!1,void clearInterval(r.anewsetInt)},1e3)):(r.$message.error(e.message),r.verify_image=(new Date).getTime())}}):this.$refs.register.validateField("bm_code"):this.$refs.register.validateField("phone"))}}}),vueforget=Vue.extend({template:'\n    <div class="masker">\n        <div class="masker_box">\n            <div class="masker_header">\n                <div class="masker_title"></div>\n                <div class="masker_close el-icon-close" @click="remove()"></div>\n            </div>\n            <div class="masker_content">\n                <div class="tab">\n                    <a href="javascript:;">找回密码</a>\n                </div>\n                <el-form ref="login" :rules="loginRules" :model="loginForm" class="loginBox">\n                    <el-form-item prop="phone">\n                        <el-input v-model="loginForm.phone" autocomplete="off"  placeholder="请输入手机号" maxlength=\'11\'></el-input>\n                    </el-form-item>\n                    <el-form-item prop="bm_code">\n                        <el-input class="cbinput" v-model="loginForm.bm_code" placeholder="请输入验证码" style="width: 60%" maxlength=\'4\'></el-input>\n                        <img class="sms_verify" :src="base_url+\'verify_image?v=\'+verify_image"  @click="verify_image = new Date().getTime()" alt="">\n                    </el-form-item>\n                    <el-form-item  prop="sms_code">\n                        <el-input v-model="loginForm.sms_code" placeholder="短信验证码" style="width: 60%"></el-input>\n                        <span class="reapcode" :class="{dis_click:disabled}" @click="getCode">{{count_text}}</span>\n                    </el-form-item>\n                    <el-form-item  prop="password">\n                        <el-input v-model="loginForm.password" placeholder="请输入密码" autocomplete="off" show-password auto-complete="new-password" maxlength=\'20\'></el-input>\n                    </el-form-item>\n                    <el-form-item  prop="confirm">\n                        <el-input v-model="loginForm.confirm" placeholder="确认密码" autocomplete="off" show-password auto-complete="new-password" maxlength=\'20\'></el-input>\n                    </el-form-item>\n                    <el-form-item>\n                        <el-button type="primary" style="width: 100%" @click="submit">确认</el-button>\n                    </el-form-item>\n                    <el-form-item class="back_login">\n                        <a href="javascript:;" @click="backLogin">返回登录</a>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n    ',data:function(){var t=this;return{tab_index:1,count_text:"获取验证码",disabled:!1,anewsetInt:null,verify_image:(new Date).getTime(),user_key:"",loginForm:{phone:"",bm_code:"",sms_code:"",password:"",confirm:""},loginRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号格式错误",trigger:"blur"}],bm_code:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^[\da-zA-Z_]{4,4}$/,message:"请输入4位验证码",trigger:"blur"}],sms_code:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"用户名密码6~20个字符之间",trigger:"blur"},{pattern:/^[\\~!@#$%^&*()-_=+|{}\[\],.?\/:;\'\"\d\w]{6,20}$/,message:"密码格式错误",trigger:"blur"}],confirm:[{validator:function(e,i,r){""==i?r(new Error("请输入确认密码")):t.loginForm.password!=t.loginForm.confirm?r(new Error("两次密码输入不一致")):r()},trigger:"blur"}]}}},methods:{submit:function(){var i=this;this.$refs.login.validate(function(e){e&&$.fn_ajax({url:base_url+"api/member/user_retrieve",options:{phone:fn_login_encryption(i.loginForm.phone),sms_code:fn_login_encryption(i.loginForm.sms_code),password:fn_login_encryption(i.loginForm.password),confirm:fn_login_encryption(i.loginForm.confirm),k:url_key},callBack:function(e){0==e.code?(i.$message.success(e.message),setTimeout(function(){i.remove(),createLogin(vuelogin)},1e3)):i.$message.error(e.message)}})})},backLogin:function(){this.remove(),createLogin(vuelogin)},getCode:function(){var r=this;this.disabled||(this.loginForm.phone?this.loginForm.bm_code?$.fn_ajax({url:base_url+"api/message/send_code",options:{phone:fn_login_encryption(this.loginForm.phone),bm_code:this.loginForm.bm_code,type:2},callBack:function(e){var i;0==e.code?(r.$message.success(e.message),r.disabled=!0,i=120,r.anewsetInt=setInterval(function(){if(i--,r.count_text=i+"s重新获取",0==i)return r.count_text="获取验证码",i=0,r.disabled=!1,void clearInterval(r.anewsetInt)},1e3)):(r.$message.error(e.message),r.verify_image=(new Date).getTime())}}):this.$refs.login.validateField("bm_code"):this.$refs.login.validateField("phone"))}}});function createLogin(e){var i=(new e).$mount();return document.body.appendChild(i.$el),document.onkeydown=function(e){13===(document?window.event:e).keyCode&&i.submit()},i.remove=function(){document.body.removeChild(i.$el),i.$destroy()},i}function quit(){var i=Vue.prototype;$.fn_ajax({url:base_url+"api/member/user_logout",options:{k:url_key},callBack:function(e){0==e.code?(i.$message.success(e.message),setTimeout("location.reload()",500)):i.$message.error(e.message)}})}function setTimeActive(){for(var e=(new Date).getTime(),i=(new Date).getFullYear(),r=$(".date"),t=0,o=r.length;t<o;t++){var s="",n=$(r[t]).data("time"),a=n.split("-")[0],l=n.split("-")[1]||"",m=new Date,c=a.split(" ")[0].split("月")[0]-1,d=a.split(" ")[0].split("月")[1].split("日")[0],g=(a.split(" ")[1]||"00:00:00").split(":");m.setFullYear(i,c,d),m.setHours(g[0],g[1],"00");var u,p,f,v,h=m.getTime();l&&(u=new Date,p=l.split(" ")[0].split("月")[0]-1,f=l.split(" ")[0].split("月")[1].split("日")[0],v=(l.split(" ")[1]||"24:00").split(":"),u.setFullYear(i,p,f),u.setHours(v[0],v[1],"00"),s=u.getTime()),h<=e&&(e<=s||""==s)&&$(r[t]).parent().addClass("active")}}isMobile=!!navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),function(){setTimeActive(),$(".showLogin").on("click",function(){isMobile?window.location.href=base_url+"login?k="+url_key:createLogin(vuelogin)}),$(".showregister").on("click",function(){isMobile?window.location.href=base_url+"login?k="+url_key:createLogin(vueregister)}),$(".quit").on("click",function(){quit()});var e=$(window).width(),i=$(window).scrollTop();100<i&&1440<=parseInt(e)?$(".fixside").show():$(".fixside").hide();for(var r=$("[data-top]"),t=i+parseInt($(window).height())/2,o=0,s=r.length;o<s;o++){var n=$(r[o]).data("top"),a=$(r[o]).offset().top,l=a+$(r[o]).height();a<t&&t<=l&&($("[data-scroll]").removeClass("active"),$('[data-scroll="[data-top='+n+']"]').addClass("active"))}$(window).scroll(function(){var e=$(window).width(),i=$(window).scrollTop();100<i&&1440<=parseInt(e)?$(".fixside").show():$(".fixside").hide();for(var r=$("[data-top]"),t=i+parseInt($(window).height())/2,o=0,s=r.length;o<s;o++){var n=$(r[o]).data("top"),a=$(r[o]).offset().top,l=a+$(r[o]).height();a<t&&t<=l&&($("[data-scroll]").removeClass("active"),$('[data-scroll="[data-top='+n+']"]').addClass("active"))}}),$("[data-scroll]").on("click",function(e){e.preventDefault();var i=$(this).attr("data-scroll");"body"!=i&&($("[data-scroll]").removeClass("active"),$(this).addClass("active")),i=$(i).offset().top-$(".header").outerHeight(),$("html,body").animate({scrollTop:i},300)}),$(".racetype .left li").hover(function(){$(".racetype .left li").removeClass("active"),$(this).addClass("active");var e=$(this).data("num");$(".racetype .box").hide(),$(".racetype .box"+e).show()}),$(".set .tab_item").hover(function(){$(".tab_item").removeClass("active"),$(this).addClass("active");var e=$(this).data("num");$(".set .box").hide(),$(".set .box"+e).show(),1!=e?$(".tit").hide():$(".tit").show()})}();